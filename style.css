/* ═══════════════════════════════════════════════
   THE CODEX — Islamic Golden Age Theme
   بيت الحكمة — House of Wisdom, Baghdad
═══════════════════════════════════════════════ */

:root {
  /* ─ Backgrounds (deep manuscript ink) ─ */
  --bg-deep:        #06080E;
  --bg-stone:       #0B1018;
  --bg-card:        #101624;
  --bg-parchment:   #131C2C;
  --bg-input:       #080C16;

  /* ─ Gold leaf ─ */
  --gold:           #C4881E;
  --gold-bright:    #E9BC52;
  --gold-dim:       #7A5314;
  --gold-border:    rgba(196,136,30,0.32);
  --gold-glow:      rgba(196,136,30,0.10);

  /* ─ Lapis lazuli ─ */
  --lapis:          #1E3F82;
  --lapis-bright:   #4A7AD6;
  --lapis-bg:       #0A1428;

  /* ─ Iznik teal ─ */
  --teal:           #1A6B7E;
  --teal-bright:    #29AECA;
  --teal-bg:        #071418;

  /* ─ Text ─ */
  --text-parchment: #EAD9B0;
  --text-gold:      #D4A840;
  --text-dim:       #8A7858;
  --text-faint:     #3C3220;

  /* ─ Semantic ─ */
  --red:            #8B1A28;
  --red-bg:         #160A10;
  --green:          #1C5C44;
  --green-bright:   #32A870;
  --green-bg:       #0A1812;

  /* ─ Layout ─ */
  --nav-h:    60px;
  --header-h: 56px;
  --radius:   5px;
  --radius-lg: 8px;

  /* ─ Fonts ─ */
  --font-display: 'Reem Kufi', serif;
  --font-title:   'Cairo', sans-serif;
  --font-body:    'Amiri', serif;
}

/* ── RESET & BASE ── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
  height: 100%;
  overflow: hidden;
  background: var(--bg-deep);
  color: var(--text-parchment);
  font-family: var(--font-body);
  font-size: 15px;
  -webkit-tap-highlight-color: transparent;
  -webkit-font-smoothing: antialiased;
}

/* ═══ ISLAMIC 8-POINTED STAR (KHATAM) BACKGROUND ═══ */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background-image:
    url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='80' height='80'><path d='M40,12 L44.4,29.3 L59.8,20.2 L50.7,35.6 L68,40 L50.7,44.4 L59.8,59.8 L44.4,50.7 L40,68 L35.6,50.7 L20.2,59.8 L29.3,44.4 L12,40 L29.3,35.6 L20.2,20.2 L35.6,29.3 Z' fill='rgba(196,136,30,0.033)' stroke='rgba(196,136,30,0.068)' stroke-width='0.5'/><circle cx='40' cy='40' r='4.5' fill='none' stroke='rgba(196,136,30,0.042)' stroke-width='0.4'/></svg>"),
    repeating-linear-gradient(45deg,  rgba(196,136,30,0.016) 0px, rgba(196,136,30,0.016) 1px, transparent 1px, transparent 56.6px),
    repeating-linear-gradient(-45deg, rgba(196,136,30,0.016) 0px, rgba(196,136,30,0.016) 1px, transparent 1px, transparent 56.6px);
  background-size: 80px 80px;
  pointer-events: none;
  z-index: 0;
}

/* depth vignette */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  background: radial-gradient(ellipse at 50% 0%, transparent 45%, rgba(6,8,14,0.55) 100%);
  pointer-events: none;
  z-index: 0;
}

#app {
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  height: 100dvh;
  height: 100vh;
}

/* ── HEADER ── */
#app-header {
  flex-shrink: 0;
  height: var(--header-h);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 14px;
  background: linear-gradient(180deg, #040710 0%, #091020 100%);
  position: relative;
  z-index: 10;
}

/* zellige-style tile border at header bottom */
#app-header::after {
  content: '';
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 3px;
  background: repeating-linear-gradient(
    90deg,
    var(--gold)          0px, var(--gold)          5px,
    var(--teal)          5px, var(--teal)           10px,
    var(--lapis-bright)  10px, var(--lapis-bright)  15px,
    var(--teal)          15px, var(--teal)           20px,
    var(--gold-dim)      20px, var(--gold-dim)       25px,
    transparent          25px, transparent           30px
  );
  opacity: 0.5;
}

#header-title {
  font-family: var(--font-display);
  font-size: 17px;
  font-weight: 600;
  color: var(--gold);
  letter-spacing: 0.18em;
  text-shadow: 0 0 28px rgba(196,136,30,0.45), 0 1px 0 rgba(0,0,0,0.9);
}

.header-ornament {
  font-size: 18px;
  color: var(--gold-dim);
  opacity: 0.6;
  line-height: 1;
}

/* ── MAIN CONTENT ── */
#content {
  flex: 1;
  overflow: hidden;
  position: relative;
}

.tab-content {
  display: none;
  position: absolute;
  inset: 0;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 16px 14px 24px;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin;
  scrollbar-color: var(--gold-dim) transparent;
}

.tab-content::-webkit-scrollbar       { width: 3px; }
.tab-content::-webkit-scrollbar-track { background: transparent; }
.tab-content::-webkit-scrollbar-thumb { background: var(--gold-dim); border-radius: 2px; }
.tab-content.active { display: block; }

/* ── BOTTOM NAV ── */
#main-nav {
  flex-shrink: 0;
  height: var(--nav-h);
  display: flex;
  background: #04060C;
  border-top: 1px solid var(--gold-border);
  box-shadow: 0 -6px 30px rgba(0,0,0,0.7);
  position: relative;
}

#main-nav::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: repeating-linear-gradient(
    90deg,
    var(--gold-dim) 0px, var(--gold-dim) 6px,
    transparent     6px, transparent     12px,
    var(--teal)     12px, var(--teal)    18px,
    transparent     18px, transparent    24px
  );
  opacity: 0.35;
}

.nav-tab {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  background: none;
  border: none;
  cursor: pointer;
  color: var(--text-faint);
  transition: color 0.25s;
  position: relative;
  -webkit-tap-highlight-color: transparent;
}

.nav-tab::after {
  content: '';
  position: absolute;
  bottom: 0; left: 18%; right: 18%;
  height: 2px;
  background: linear-gradient(90deg, var(--teal), var(--gold), var(--teal));
  transform: scaleX(0);
  transition: transform 0.28s;
  border-radius: 1px 1px 0 0;
}

.nav-tab.active          { color: var(--gold); }
.nav-tab.active::after   { transform: scaleX(1); }

.nav-icon  { font-size: 19px; line-height: 1; }
.nav-label { font-family: var(--font-title); font-size: 9px; letter-spacing: 0.06em; font-weight: 600; }

/* ── CARDS ── */
.card {
  background: var(--bg-card);
  border: 1px solid var(--gold-border);
  border-radius: var(--radius-lg);
  padding: 16px;
  margin-bottom: 12px;
  position: relative;
  overflow: hidden;
}

.card::before {
  content: '';
  position: absolute;
  inset: 0;
  background:
    linear-gradient(135deg, rgba(196,136,30,0.045) 0%, transparent 40%),
    linear-gradient(315deg, rgba(26,107,126,0.035) 0%, transparent 40%);
  pointer-events: none;
  border-radius: var(--radius-lg);
}

.card::after {
  content: '';
  position: absolute;
  top: 0; left: 12%; right: 12%;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--gold-border), transparent);
  pointer-events: none;
}

.card-parchment { background: var(--bg-parchment); }

/* ── SECTION HEADERS ── */
.section-title {
  font-family: var(--font-title);
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.20em;
  color: var(--gold);
  text-transform: uppercase;
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 14px;
}

.section-title::before { content: ''; flex: 1; height: 1px; background: linear-gradient(to left, var(--gold-border), transparent); }
.section-title::after  { content: ''; flex: 1; height: 1px; background: linear-gradient(to right, var(--gold-border), transparent); }

.module-title {
  font-family: var(--font-display);
  font-size: 24px;
  font-weight: 600;
  color: var(--gold-bright);
  text-align: center;
  letter-spacing: 0.06em;
  margin-bottom: 4px;
  text-shadow: 0 0 36px rgba(233,188,82,0.28);
}

.module-subtitle {
  font-family: var(--font-body);
  font-style: italic;
  font-size: 13px;
  color: var(--text-dim);
  text-align: center;
  margin-bottom: 18px;
  line-height: 1.6;
}

/* ── BUTTONS ── */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 10px 18px;
  border: 1px solid var(--gold-border);
  border-radius: var(--radius);
  background: linear-gradient(180deg, #1A2538 0%, #101824 100%);
  color: var(--text-gold);
  font-family: var(--font-title);
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 0.08em;
  cursor: pointer;
  transition: all 0.2s;
  text-transform: uppercase;
  -webkit-tap-highlight-color: transparent;
}

.btn:active { transform: scale(0.97); }
.btn:hover  {
  border-color: var(--gold);
  color: var(--gold-bright);
  background: linear-gradient(180deg, #243048 0%, #161E30 100%);
}

.btn-primary {
  background: linear-gradient(180deg, #1C2E5C 0%, #111C3C 100%);
  border-color: var(--lapis-bright);
  color: #A8C8F4;
  box-shadow: 0 0 14px rgba(74,122,214,0.15);
}

.btn-primary:hover {
  border-color: var(--teal-bright);
  color: #9CE8F8;
  box-shadow: 0 0 22px rgba(41,174,202,0.22);
}

.btn-danger {
  border-color: rgba(139,26,40,0.4);
  color: #C04050;
  background: linear-gradient(180deg, #180C12 0%, #100810 100%);
}

.btn-sm   { padding: 6px 12px; font-size: 10px; }
.btn-icon { width: 34px; height: 34px; padding: 0; border-radius: 50%; font-size: 14px; }
.btn-full { width: 100%; }

/* ── FAB ── */
.fab {
  position: fixed;
  bottom: calc(var(--nav-h) + 16px);
  right: 16px;
  width: 54px; height: 54px;
  border-radius: 50%;
  background: linear-gradient(135deg, #1C3668 0%, #0E1840 100%);
  border: 1px solid var(--lapis-bright);
  color: #A0CCFA;
  font-size: 24px;
  display: flex; align-items: center; justify-content: center;
  box-shadow: 0 4px 24px rgba(74,122,214,0.35), 0 2px 8px rgba(0,0,0,0.7);
  cursor: pointer;
  z-index: 50;
  transition: transform 0.2s, box-shadow 0.2s;
  -webkit-tap-highlight-color: transparent;
}

.fab:active { transform: scale(0.93); }

/* ── FORMS ── */
.form-group { margin-bottom: 14px; }

.form-label {
  display: block;
  font-family: var(--font-title);
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.14em;
  color: var(--text-dim);
  text-transform: uppercase;
  margin-bottom: 6px;
}

.form-control {
  width: 100%;
  padding: 10px 12px;
  background: var(--bg-input);
  border: 1px solid rgba(196,136,30,0.18);
  border-radius: var(--radius);
  color: var(--text-parchment);
  font-family: var(--font-body);
  font-size: 14px;
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
  -webkit-appearance: none;
}

.form-control:focus {
  border-color: var(--teal);
  box-shadow: 0 0 0 2px rgba(26,107,126,0.12);
}

.form-control option { background: var(--bg-stone); color: var(--text-parchment); }
textarea.form-control { resize: vertical; min-height: 90px; }
.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }

/* ── MODAL ── */
#modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.86);
  z-index: 200;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  backdrop-filter: blur(4px);
}

#modal-overlay.hidden { display: none; }

#modal-box {
  background: var(--bg-card);
  border: 1px solid var(--gold-border);
  border-bottom: none;
  border-radius: var(--radius-lg) var(--radius-lg) 0 0;
  width: 100%;
  max-width: 540px;
  max-height: 92dvh;
  max-height: 92vh;
  overflow-y: auto;
  padding: 22px 18px 32px;
  position: relative;
  box-shadow: 0 -10px 50px rgba(196,136,30,0.08), 0 -4px 20px rgba(74,122,214,0.07);
  animation: slide-up 0.28s ease;
}

/* Modal top zellige strip */
#modal-box::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 3px;
  background: repeating-linear-gradient(
    90deg,
    var(--gold) 0px, var(--gold) 5px,
    var(--teal) 5px, var(--teal) 10px,
    var(--lapis-bright) 10px, var(--lapis-bright) 15px,
    var(--teal) 15px, var(--teal) 20px,
    transparent 20px, transparent 25px
  );
  opacity: 0.5;
  border-radius: var(--radius-lg) var(--radius-lg) 0 0;
}

@keyframes slide-up {
  from { transform: translateY(100%); opacity: 0; }
  to   { transform: translateY(0);    opacity: 1; }
}

#modal-close {
  position: absolute;
  top: 16px; right: 14px;
  background: none; border: none;
  color: var(--text-dim);
  font-size: 17px;
  cursor: pointer;
  padding: 4px 8px;
  line-height: 1;
  font-family: var(--font-title);
}

.modal-title {
  font-family: var(--font-display);
  font-size: 16px;
  font-weight: 600;
  color: var(--gold);
  letter-spacing: 0.1em;
  margin-bottom: 20px;
  padding-right: 30px;
  text-shadow: 0 0 20px rgba(196,136,30,0.3);
}

/* ── TOAST ── */
#toast {
  position: fixed;
  bottom: calc(var(--nav-h) + 16px);
  left: 50%;
  transform: translateX(-50%) translateY(20px);
  background: var(--bg-parchment);
  border: 1px solid var(--gold-border);
  color: var(--text-parchment);
  font-family: var(--font-title);
  font-size: 12px;
  letter-spacing: 0.06em;
  padding: 10px 22px;
  border-radius: 20px;
  opacity: 0;
  transition: opacity 0.3s, transform 0.3s;
  z-index: 300;
  pointer-events: none;
  white-space: nowrap;
  box-shadow: 0 4px 20px rgba(0,0,0,0.5);
}

#toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

/* ── HOME MODULE ── */
.home-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin-top: 10px;
}

.home-card {
  background: var(--bg-card);
  border: 1px solid var(--gold-border);
  border-radius: var(--radius-lg);
  padding: 16px 12px;
  text-align: center;
  cursor: pointer;
  transition: border-color 0.22s, transform 0.15s, box-shadow 0.22s;
  position: relative;
  overflow: hidden;
  -webkit-tap-highlight-color: transparent;
}

.home-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--card-accent, rgba(196,136,30,0.04));
  pointer-events: none;
}

.home-card:active { transform: scale(0.97); }
.home-card:hover  { border-color: var(--gold); box-shadow: 0 0 22px var(--gold-glow); }

.home-card-icon  { font-size: 30px; display: block; margin-bottom: 8px; }
.home-card-name  { font-family: var(--font-title); font-size: 11px; font-weight: 700; letter-spacing: 0.12em; color: var(--gold); text-transform: uppercase; margin-bottom: 6px; }
.home-card-stat  { font-family: var(--font-body); font-style: italic; font-size: 12px; color: var(--text-dim); }

.home-banner { text-align: center; padding: 18px 0 12px; }

.home-crest {
  display: block;
  font-size: 54px;
  margin-bottom: 10px;
  filter: drop-shadow(0 0 18px rgba(196,136,30,0.38));
  animation: float 4.5s ease-in-out infinite;
}

@keyframes float {
  0%,100% { transform: translateY(0); }
  50%      { transform: translateY(-7px); }
}

.home-greeting {
  font-family: var(--font-display);
  font-size: 19px;
  font-weight: 600;
  color: var(--gold-bright);
  text-shadow: 0 0 30px rgba(233,188,82,0.3);
  margin-bottom: 8px;
  letter-spacing: 0.04em;
}

.home-date-gregorian {
  font-family: var(--font-body);
  font-size: 13px;
  color: var(--text-dim);
}

.home-date-hijri {
  font-family: var(--font-body);
  font-style: italic;
  font-size: 12px;
  color: var(--teal-bright);
  margin-top: 4px;
  opacity: 0.9;
}

.home-divider {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 14px 0;
  color: var(--gold-dim);
  font-size: 14px;
}

.home-divider::before { content: ''; flex: 1; height: 1px; background: linear-gradient(to left, var(--gold-border), transparent); }
.home-divider::after  { content: ''; flex: 1; height: 1px; background: linear-gradient(to right, var(--gold-border), transparent); }

/* ── QUOTE CARD ── */
.quote-card {
  background: linear-gradient(135deg, var(--bg-parchment) 0%, #0C1420 100%);
  border: 1px solid var(--gold-border);
  border-left: 3px solid var(--gold);
  border-radius: var(--radius);
  padding: 16px 18px 16px 16px;
  position: relative;
}

.quote-open {
  display: block;
  font-size: 32px;
  color: var(--gold-dim);
  line-height: 1;
  opacity: 0.45;
  font-family: Georgia, serif;
  margin-bottom: 2px;
}

.quote-text   { font-style: italic; font-size: 14px; color: var(--text-parchment); line-height: 1.8; font-family: var(--font-body); }
.quote-author { font-family: var(--font-title); font-size: 10px; letter-spacing: 0.14em; color: var(--teal-bright); margin-top: 10px; text-transform: uppercase; }
.quote-era    { font-size: 10px; color: var(--text-faint); margin-top: 2px; font-family: var(--font-body); font-style: italic; }

/* ── TREASURY ── */
.treasury-tabs {
  display: flex;
  margin-bottom: 16px;
  border: 1px solid var(--gold-border);
  border-radius: var(--radius);
  overflow: hidden;
}

.treasury-tab {
  flex: 1;
  padding: 9px 4px;
  background: none;
  border: none;
  color: var(--text-dim);
  font-family: var(--font-title);
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.07em;
  text-transform: uppercase;
  cursor: pointer;
  transition: all 0.2s;
  border-right: 1px solid var(--gold-border);
  -webkit-tap-highlight-color: transparent;
}

.treasury-tab:last-child { border-right: none; }
.treasury-tab.active { background: linear-gradient(180deg, #1A2840 0%, #101C30 100%); color: var(--gold-bright); }

/* Chart */
.chart-wrap  { display: flex; flex-direction: column; align-items: center; gap: 16px; padding: 8px 0; }
.pie-svg     { overflow: visible; }
.pie-legend  { width: 100%; display: flex; flex-direction: column; gap: 7px; }
.legend-item { display: flex; align-items: center; gap: 10px; font-size: 13px; }
.legend-dot  { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
.legend-label{ flex: 1; color: var(--text-parchment); font-family: var(--font-body); }
.legend-pct  { color: var(--text-dim); font-size: 12px; }
.legend-amt  { color: var(--gold); font-family: var(--font-title); font-size: 12px; }

/* Transactions */
.tx-item     { display: flex; align-items: center; gap: 10px; padding: 11px 0; border-bottom: 1px solid rgba(196,136,30,0.08); }
.tx-item:last-child { border-bottom: none; }
.tx-icon     { width: 36px; height: 36px; border-radius: 50%; background: var(--bg-stone); border: 1px solid var(--gold-border); display: flex; align-items: center; justify-content: center; font-size: 16px; flex-shrink: 0; }
.tx-info     { flex: 1; min-width: 0; }
.tx-category { font-family: var(--font-title); font-size: 12px; font-weight: 600; color: var(--text-gold); }
.tx-note     { font-size: 12px; color: var(--text-dim); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.tx-date     { font-size: 11px; color: var(--text-faint); margin-top: 1px; }
.tx-amount   { font-family: var(--font-title); font-size: 14px; font-weight: 700; text-align: right; flex-shrink: 0; }
.tx-amount.income  { color: var(--green-bright); }
.tx-amount.expense { color: #D04050; }
.tx-del      { background: none; border: none; color: var(--text-faint); font-size: 15px; cursor: pointer; padding: 4px; flex-shrink: 0; }

/* Monthly */
.month-compare     { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.month-box         { background: var(--bg-stone); border: 1px solid var(--gold-border); border-radius: var(--radius); padding: 12px; }
.month-box-label   { font-family: var(--font-title); font-size: 10px; letter-spacing: 0.1em; color: var(--text-dim); text-transform: uppercase; margin-bottom: 8px; }
.month-stat        { margin-bottom: 6px; }
.month-stat-label  { font-size: 11px; color: var(--text-dim); }
.month-stat-val    { font-family: var(--font-title); font-size: 13px; font-weight: 700; color: var(--text-parchment); }
.month-change      { display: inline-flex; align-items: center; gap: 3px; font-family: var(--font-title); font-size: 10px; font-weight: 700; padding: 2px 8px; border-radius: 10px; margin-top: 6px; }
.month-change.up   { background: var(--green-bg); color: var(--green-bright); }
.month-change.down { background: var(--red-bg); color: #D04050; }

/* Reconcile */
.recon-row           { display: flex; justify-content: space-between; align-items: center; padding: 9px 0; border-bottom: 1px solid rgba(196,136,30,0.07); }
.recon-row:last-child{ border-bottom: none; }
.recon-label         { font-size: 13px; color: var(--text-dim); font-family: var(--font-body); }
.recon-val           { font-family: var(--font-title); font-size: 14px; font-weight: 700; color: var(--text-parchment); }
.recon-val.good      { color: var(--green-bright); }
.recon-val.warn      { color: #E8A020; }
.recon-val.bad       { color: #D04050; }

/* Gold Vault */
.gold-price-banner {
  background: linear-gradient(135deg, #1C2A10 0%, #121C08 100%);
  border: 1px solid rgba(196,136,30,0.5);
  border-radius: var(--radius);
  padding: 12px 14px;
  margin-bottom: 14px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  box-shadow: 0 0 20px rgba(196,136,30,0.07);
}

.gold-price-label { font-family: var(--font-title); font-size: 10px; color: var(--text-dim); letter-spacing: 0.1em; }
.gold-price-val   { font-family: var(--font-display); font-size: 18px; color: var(--gold-bright); }
.gold-price-sub   { font-size: 10px; color: var(--text-dim); margin-top: 2px; }
.gold-item        { display: flex; align-items: center; gap: 10px; padding: 10px 0; border-bottom: 1px solid rgba(196,136,30,0.08); }
.gold-item:last-child { border-bottom: none; }
.gold-item-grams  { font-family: var(--font-display); font-size: 15px; color: var(--gold); }
.gold-item-date   { font-size: 12px; color: var(--text-dim); }
.gold-item-paid   { font-size: 12px; color: var(--text-dim); }
.gold-item-now    { font-family: var(--font-title); font-size: 13px; color: var(--gold-bright); text-align: right; }
.gold-item-gain   { font-size: 11px; text-align: right; }
.gold-item-gain.pos { color: var(--green-bright); }
.gold-item-gain.neg { color: #D04050; }

/* ── HABITS ── */
.habit-row       { display: flex; align-items: center; gap: 12px; padding: 12px 0; border-bottom: 1px solid rgba(196,136,30,0.08); }
.habit-row:last-child { border-bottom: none; }
.habit-check     { width: 40px; height: 40px; border-radius: 50%; border: 2px solid var(--gold-border); background: var(--bg-stone); display: flex; align-items: center; justify-content: center; font-size: 18px; cursor: pointer; transition: all 0.2s; flex-shrink: 0; -webkit-tap-highlight-color: transparent; }
.habit-check.done{ border-color: var(--green-bright); background: var(--green-bg); box-shadow: 0 0 14px rgba(50,168,112,0.22); }
.habit-info      { flex: 1; }
.habit-name      { font-family: var(--font-title); font-size: 14px; color: var(--text-parchment); margin-bottom: 2px; }
.habit-streak    { font-size: 12px; color: var(--text-dim); display: flex; align-items: center; gap: 4px; }
.streak-fire     { color: #F08020; }

.week-grid       { display: flex; gap: 5px; margin-top: 8px; }
.week-day        { flex: 1; text-align: center; }
.week-day-label  { font-family: var(--font-title); font-size: 8px; letter-spacing: 0.04em; color: var(--text-faint); text-transform: uppercase; margin-bottom: 4px; }
.week-dot        { width: 100%; aspect-ratio: 1; border-radius: 3px; border: 1px solid rgba(196,136,30,0.15); background: var(--bg-stone); display: flex; align-items: center; justify-content: center; font-size: 9px; color: var(--text-faint); }
.week-dot.done   { background: var(--green-bg); border-color: var(--green-bright); color: var(--green-bright); }
.week-dot.today  { border-color: var(--gold); }

/* ── GYM ── */
.workout-item     { padding: 12px 0; border-bottom: 1px solid rgba(196,136,30,0.08); }
.workout-item:last-child { border-bottom: none; }
.workout-header   { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 6px; }
.workout-type     { font-family: var(--font-display); font-size: 13px; color: var(--gold); }
.workout-date     { font-size: 11px; color: var(--text-faint); }
.workout-duration { font-size: 12px; color: var(--text-dim); }
.exercise-row     { display: flex; align-items: center; gap: 8px; padding: 5px 0; }
.exercise-name    { flex: 1; font-size: 13px; color: var(--text-parchment); font-family: var(--font-body); }
.exercise-details { font-family: var(--font-title); font-size: 12px; color: var(--text-dim); }
.set-builder      { border: 1px solid var(--gold-border); border-radius: var(--radius); overflow: hidden; margin-top: 8px; }
.set-row          { display: grid; grid-template-columns: 36px 1fr 1fr 1fr 32px; gap: 6px; align-items: center; padding: 7px 10px; border-bottom: 1px solid rgba(196,136,30,0.06); font-size: 13px; }
.set-row:last-child { border-bottom: none; }
.set-num          { color: var(--text-dim); font-family: var(--font-title); font-size: 11px; }
.set-input        { background: var(--bg-input); border: 1px solid rgba(196,136,30,0.12); border-radius: 4px; color: var(--text-parchment); font-family: var(--font-title); font-size: 13px; padding: 5px 6px; text-align: center; width: 100%; outline: none; }
.set-input:focus  { border-color: var(--teal); }
.set-del-btn      { background: none; border: none; color: var(--text-faint); cursor: pointer; font-size: 14px; padding: 0; }
.gym-stats-row    { display: grid; grid-template-columns: repeat(3,1fr); gap: 10px; margin-bottom: 16px; }
.gym-stat-box     { background: var(--bg-stone); border: 1px solid var(--gold-border); border-radius: var(--radius); padding: 12px 10px; text-align: center; }
.gym-stat-val     { font-family: var(--font-display); font-size: 22px; color: var(--gold-bright); }
.gym-stat-label   { font-size: 10px; color: var(--text-dim); letter-spacing: 0.06em; margin-top: 2px; font-family: var(--font-title); }

/* ── STUDY ── */
.timer-display { text-align: center; padding: 20px 0 14px; }

.timer-clock {
  font-family: var(--font-display);
  font-size: 58px;
  font-weight: 600;
  color: var(--gold-bright);
  letter-spacing: 0.04em;
  text-shadow: 0 0 40px rgba(233,188,82,0.4), 0 0 80px rgba(196,136,30,0.15);
  line-height: 1;
  margin-bottom: 8px;
}

.timer-label        { font-family: var(--font-title); font-size: 11px; letter-spacing: 0.18em; color: var(--text-dim); text-transform: uppercase; }
.timer-controls     { display: flex; justify-content: center; gap: 12px; margin-top: 16px; }
.study-session-row  { display: flex; align-items: center; gap: 10px; padding: 10px 0; border-bottom: 1px solid rgba(196,136,30,0.08); }
.study-session-row:last-child { border-bottom: none; }
.study-dot          { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
.study-info         { flex: 1; }
.study-subject      { font-family: var(--font-title); font-size: 13px; color: var(--text-parchment); }
.study-topic        { font-size: 12px; color: var(--text-dim); }
.study-duration     { font-family: var(--font-display); font-size: 13px; color: var(--gold); }
.study-date         { font-size: 11px; color: var(--text-faint); }
.progress-bar-wrap  { height: 5px; background: var(--bg-stone); border-radius: 3px; overflow: hidden; margin-top: 6px; }
.progress-bar-fill  { height: 100%; border-radius: 3px; transition: width 0.4s; }
.weekly-goal-row    { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; }
.wg-label           { flex: 1; }
.wg-name            { font-family: var(--font-title); font-size: 13px; color: var(--text-parchment); }
.wg-hours           { font-size: 12px; color: var(--text-dim); margin-top: 2px; }

/* ── JOURNAL ── */
.mood-selector  { display: flex; justify-content: space-between; gap: 6px; margin-bottom: 14px; }

.mood-btn {
  flex: 1; padding: 10px 4px;
  background: var(--bg-stone);
  border: 1px solid var(--gold-border);
  border-radius: var(--radius);
  text-align: center;
  cursor: pointer;
  transition: all 0.2s;
  -webkit-tap-highlight-color: transparent;
}

.mood-btn:hover, .mood-btn.selected {
  border-color: var(--teal);
  background: #0C1A26;
  box-shadow: 0 0 10px rgba(26,107,126,0.15);
}

.mood-emoji { font-size: 22px; display: block; }
.mood-name  { font-family: var(--font-title); font-size: 8px; color: var(--text-dim); letter-spacing: 0.05em; margin-top: 3px; text-transform: uppercase; }

.journal-entry        { padding: 14px 0; border-bottom: 1px solid rgba(196,136,30,0.08); cursor: pointer; }
.journal-entry:last-child { border-bottom: none; }
.journal-entry:active { opacity: 0.8; }
.journal-entry-header { display: flex; align-items: flex-start; justify-content: space-between; gap: 10px; margin-bottom: 4px; }
.journal-title        { font-family: var(--font-body); font-size: 15px; font-weight: 700; color: var(--text-parchment); flex: 1; }
.journal-mood-badge   { font-size: 18px; }
.journal-date         { font-size: 11px; color: var(--text-faint); font-family: var(--font-title); }
.journal-excerpt      { font-style: italic; font-size: 13px; color: var(--text-dim); line-height: 1.6; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

.tag-chip {
  display: inline-flex; padding: 2px 8px;
  background: var(--bg-stone);
  border: 1px solid rgba(26,107,126,0.28);
  border-radius: 10px;
  font-family: var(--font-title);
  font-size: 10px;
  color: var(--teal-bright);
  margin: 2px;
}

.entry-full-content {
  font-style: italic;
  line-height: 1.85;
  color: var(--text-parchment);
  font-size: 15px;
  white-space: pre-wrap;
  padding: 10px 0;
  font-family: var(--font-body);
}

/* ── SUMMARY BAR ── */
.summary-bar { display: grid; grid-template-columns: 1fr 1fr 1fr; background: var(--bg-stone); border: 1px solid var(--gold-border); border-radius: var(--radius); overflow: hidden; margin-bottom: 14px; }
.summary-cell { padding: 12px 8px; text-align: center; border-right: 1px solid var(--gold-border); }
.summary-cell:last-child { border-right: none; }
.summary-cell-label { font-family: var(--font-title); font-size: 9px; letter-spacing: 0.12em; text-transform: uppercase; color: var(--text-dim); margin-bottom: 4px; }
.summary-cell-val   { font-family: var(--font-title); font-size: 14px; font-weight: 700; }

/* ── FILTER ROW ── */
.filter-row { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 6px; margin-bottom: 12px; -webkit-overflow-scrolling: touch; scrollbar-width: none; }
.filter-row::-webkit-scrollbar { display: none; }
.filter-chip { flex-shrink: 0; padding: 5px 12px; border: 1px solid var(--gold-border); border-radius: 16px; background: var(--bg-stone); font-family: var(--font-title); font-size: 11px; color: var(--text-dim); cursor: pointer; white-space: nowrap; transition: all 0.15s; -webkit-tap-highlight-color: transparent; }
.filter-chip.active { border-color: var(--teal-bright); color: var(--teal-bright); background: var(--teal-bg); }

/* ── TYPE TOGGLE ── */
.type-toggle { display: flex; border: 1px solid var(--gold-border); border-radius: var(--radius); overflow: hidden; margin-bottom: 14px; }
.type-toggle-btn { flex: 1; padding: 10px; background: none; border: none; font-family: var(--font-title); font-size: 12px; font-weight: 600; letter-spacing: 0.08em; cursor: pointer; transition: all 0.2s; -webkit-tap-highlight-color: transparent; }
.type-toggle-btn.income.active  { background: var(--green-bg); color: var(--green-bright); }
.type-toggle-btn.expense.active { background: var(--red-bg); color: #D04050; }
.type-toggle-btn:not(.active)   { color: var(--text-faint); }

/* ── SEARCH ── */
.search-wrap  { position: relative; margin-bottom: 14px; }
.search-icon  { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--text-faint); font-size: 14px; pointer-events: none; }
.search-input { padding-left: 34px !important; }

/* ── MISC ── */
.text-center { text-align: center; }
.text-gold   { color: var(--gold); }
.text-green  { color: var(--green-bright); }
.text-red    { color: #D04050; }
.text-dim    { color: var(--text-dim); }
.text-sm     { font-size: 12px; }
.mt-8  { margin-top: 8px; }
.mt-12 { margin-top: 12px; }
.mt-16 { margin-top: 16px; }
.mb-12 { margin-bottom: 12px; }
.mb-16 { margin-bottom: 16px; }

.empty-state { text-align: center; padding: 36px 20px; }
.empty-icon  { font-size: 38px; margin-bottom: 10px; }
.empty-title { font-family: var(--font-title); font-size: 14px; color: var(--text-dim); letter-spacing: 0.08em; margin-bottom: 4px; }
.empty-sub   { font-style: italic; font-size: 12px; color: var(--text-faint); }

.divider { display: flex; align-items: center; gap: 10px; margin: 14px 0; color: var(--gold-dim); font-size: 12px; }
.divider::before { content: ''; flex: 1; height: 1px; background: linear-gradient(to left, var(--gold-border), transparent); }
.divider::after  { content: ''; flex: 1; height: 1px; background: linear-gradient(to right, var(--gold-border), transparent); }

.pill         { display: inline-flex; padding: 3px 10px; border-radius: 12px; font-family: var(--font-title); font-size: 11px; font-weight: 600; }
.pill-income  { background: var(--green-bg); color: var(--green-bright); border: 1px solid rgba(50,168,112,0.25); }
.pill-expense { background: var(--red-bg); color: #D04050; border: 1px solid rgba(139,26,40,0.25); }

.color-options { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 6px; }
.color-opt     { width: 28px; height: 28px; border-radius: 50%; border: 2px solid transparent; cursor: pointer; transition: transform 0.15s, border-color 0.15s; }
.color-opt.selected { border-color: white; transform: scale(1.2); }

input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; }
input[type=number] { -moz-appearance: textfield; }

/* ── SAFE AREA ── */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
  #main-nav { padding-bottom: env(safe-area-inset-bottom); height: calc(var(--nav-h) + env(safe-area-inset-bottom)); }
  .fab   { bottom: calc(var(--nav-h) + env(safe-area-inset-bottom) + 16px); }
  #toast { bottom: calc(var(--nav-h) + env(safe-area-inset-bottom) + 16px); }
}
